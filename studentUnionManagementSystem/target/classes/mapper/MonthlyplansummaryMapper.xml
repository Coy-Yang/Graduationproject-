<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wbg.sums.dao.MonthlyPlanSummaryMapper">
    <resultMap id="BaseResultMap" type="com.wbg.sums.entity.MonthlyPlanSummary">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="m_id" jdbcType="INTEGER" property="mId"/>
        <result column="m_title" jdbcType="VARCHAR" property="mTitle"/>
        <result column="d_id" jdbcType="INTEGER" property="dId"/>
        <result column="m_date" jdbcType="TIMESTAMP" property="mDate"/>
        <result column="m_file" jdbcType="VARCHAR" property="mFile"/>
        <result column="m_remarks" jdbcType="VARCHAR" property="mRemarks"/>
        <result column="m_name" jdbcType="VARCHAR" property="mName"/>
        <result column="m_contexts" jdbcType="LONGVARCHAR" property="mContexts"/>
        <collection property="departmenttype" resultMap="departmenttype" autoMapping="true"/>

    </resultMap>
    <resultMap id="departmenttype" type="DepartmentType" autoMapping="true"/>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from monthlyplansummary
        where m_id = #{mId,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.wbg.sums.entity.MonthlyPlanSummary">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into monthlyplansummary ( m_title, d_id,
        m_file, m_remarks,
        m_name, m_contexts)
        values (#{mTitle,jdbcType=VARCHAR}, #{dId,jdbcType=INTEGER},
        #{mFile,jdbcType=VARCHAR}, #{mRemarks,jdbcType=VARCHAR},
        #{mName,jdbcType=VARCHAR}, #{mContexts,jdbcType=LONGVARCHAR})
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.wbg.sums.entity.MonthlyPlanSummary">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update monthlyplansummary
        set m_title = #{mTitle,jdbcType=VARCHAR},
        m_date = now(),
        m_file = #{mFile,jdbcType=VARCHAR},
        m_remarks = #{mRemarks,jdbcType=VARCHAR},
        m_contexts = #{mContexts,jdbcType=LONGVARCHAR}
        where m_id = #{mId,jdbcType=INTEGER}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select m_id, m_title, d.d_id, m_date, m_file, m_remarks, m_name, m_contexts,d_name
        from monthlyplansummary m join departmenttype d on m.d_id = d.d_id
        where m_id = #{mId,jdbcType=INTEGER}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select m_id, m_title, m.d_id, m_date, m_file, m_remarks, m_name, m_contexts,d_name
        from monthlyplansummary m join departmenttype d on m.d_id = d.d_id
    </select>
    <select id="count" resultType="java.lang.Integer">
    select count(*) from monthlyplansummary
  </select>
    <select id="selectDate" resultMap="BaseResultMap">
    select m_id, m_title, m.d_id, m_date, m_file, m_remarks, m_name, m_contexts,d_name
        from monthlyplansummary m join departmenttype d on m.d_id = d.d_id
    where m_date &gt;= #{beforeDate} and m_date  &lt;=  #{afterDate}
    </select>
    <select id="selectmName" resultMap="BaseResultMap">
   select m_id, m_title, m.d_id, m_date, m_file, m_remarks, m_name, m_contexts,d_name
        from monthlyplansummary m join departmenttype d on m.d_id = d.d_id
    where m_name like concat('%',#{mName} ,'%')
  </select>
    <select id="selectdId" resultMap="BaseResultMap">
select m_id, m_title, m.d_id, m_date, m_file, m_remarks, m_name, m_contexts,d_name
        from monthlyplansummary m join departmenttype d on m.d_id = d.d_id
    where d.d_id = #{dId}
  </select>
    <select id="counts" resultType="java.lang.Integer">
        select count(*) from monthlyplansummary
        <where>
            <if test="dId != 0">
                and d_id = #{dId}
            </if>
            <if test=" beforeDate != null and beforeDate != '' ">
                and m_date &gt;= #{beforeDate} and m_date &lt;= #{afterDate}
            </if>
            <if test=" mName != null and mName != '' ">
                and m_name like concat('%',#{mName} ,'%')
            </if>
        </where>
    </select>
</mapper>